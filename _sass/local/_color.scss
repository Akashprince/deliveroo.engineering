@function color($key, $lighten: null, $darken: null, $transparency: null) {
  @if map-has-key($colors, $key) {
    // if a lighten argument was passed, mix that colour with white
    @if $lighten != null {
      @return mix(map-get($colors, $key), white, $lighten);
    }

    // if a darken argument was passed, mix that colour with black
    @if $darken != null {
      @return mix(map-get($colors, $key), black, $darken);
    }
    
    // if a transparency argument was passed, transparentize;
    // N.B. Sass uses 1.0 to mean 100% transparent, not 100% opaque
    @if $transparency != null {
      @return transparentize(map-get($colors, $key), 1 - $transparency);
    }
    
    // otherwise just return the colour
    @return map-get($colors, $key);
  }
  
  @error "Unknown color `#{$key}` in $colors.";
  @return null;
} // @function color()

// usage:
// color(teal)                           => #04bab1
// color(dark_grey, 75%)                 => #626666
// color(light_grey, $transparency: 0.2) => rgb(140, 155, 155, 0.2)
// color(teal, $darken: 20%)             => #03958e
//
// or if you prefer, actual usage:
//
// div.foo {
//   background-color: color(teal, 25%);
// }
//
// =>
//
// div.foo {
//   background-color: #43cbc5;
// }
